// =========================
// 1. ì§ˆë¬¸ ë°ì´í„° (12ë¬¸í•­, title + text êµ¬ì¡°)
// =========================
const questions = [
  {
    title: "ìƒˆë¡œìš´ ëª¨ì„ì— ë“¤ì–´ê°„ ì²« ìˆœê°„",
    text: "ì²˜ìŒ ë³´ëŠ” ì‚¬ëŒë“¤ ì•ì—ì„œ ìê¸°ì†Œê°œë¥¼ í•  ë•Œ, ë‚˜ëŠ”â€¦",
    axis: "ê´€ê³„",
    options: [
      { answer: "ë¶„ìœ„ê¸°ë¥¼ ë§ì¶”ë©° ë°ê²Œ ì†Œê°œí•œë‹¤", style: "ìˆœì‘" },
      { answer: "ë‚´ ê°•ì ì„ ê°•ì¡°í•´ ì¡´ì¬ê°ì„ ë“œëŸ¬ë‚¸ë‹¤", style: "íˆ¬ìŸ" },
      { answer: "ë¨¸ë¦¿ì†ìœ¼ë¡œ ì •ë¦¬í•œ ë¬¸ì¥ì„ ì‹¤ìˆ˜ ì—†ì´ ë§í•œë‹¤", style: "ì™„ë²½ì£¼ì˜" },
      { answer: "ë§ì„ ì¤„ì´ê³  ë¹¨ë¦¬ ë„˜ì–´ê°€ê¸¸ ë°”ë€ë‹¤", style: "íšŒí”¼" }
    ]
  },
  {
    title: "ëŒ€í™”ì—ì„œ ì˜ê²¬ ì°¨ì´",
    text: "ë‚´ ìƒê°ê³¼ ë‹¤ë¥¸ ì´ì•¼ê¸°ê°€ ë‚˜ì™”ì„ ë•Œ, ë‚˜ëŠ”â€¦",
    axis: "ê´€ê³„",
    options: [
      { answer: "ìƒëŒ€ì˜ ë§ì— ë™ì˜í•˜ë©° ë§ì¶˜ë‹¤", style: "ìˆœì‘" },
      { answer: "ë‚´ ì£¼ì¥ì„ êµ½íˆì§€ ì•Šê³  ë§ì„ ë‹¤", style: "íˆ¬ìŸ" },
      { answer: "ì¶©ë¶„í•œ ê·¼ê±°ë¥¼ ì¤€ë¹„í•˜ì§€ ëª»í•´ ì¹¨ë¬µí•œë‹¤", style: "ì™„ë²½ì£¼ì˜" },
      { answer: "ê´€ì‹¬ ì—†ëŠ” ì²™í•˜ë©° ìë¦¬ë¥¼ í”¼í•œë‹¤", style: "íšŒí”¼" }
    ]
  },
  {
    title: "íšŒì˜ ì¤‘ ë‚´ ì˜ê²¬ì´ ë¬´ì‹œë  ë•Œ",
    text: "ì¤‘ìš”í•œ ì˜ì‚¬ê²°ì • ìë¦¬ì—ì„œ ë‚´ ë°œì–¸ì´ ë¬´ì‹œëœë‹¤ë©´, ë‚˜ëŠ”â€¦",
    axis: "ê´€ê³„",
    options: [
      { answer: "ë‹¤ìˆ˜ ì˜ê²¬ì— ë”°ë¼ê°„ë‹¤", style: "ìˆœì‘" },
      { answer: "ë‚´ ì˜ê²¬ì„ ë‹¤ì‹œ ê°•ì¡°í•œë‹¤", style: "íˆ¬ìŸ" },
      { answer: "ë‚´ ë…¼ë¦¬ì˜ ë¶€ì¡±í•¨ì„ ê³±ì”¹ìœ¼ë©° ì¹¨ë¬µí•œë‹¤", style: "ì™„ë²½ì£¼ì˜" },
      { answer: "ì•„ì˜ˆ ë” ë§í•˜ì§€ ì•ŠëŠ”ë‹¤", style: "íšŒí”¼" }
    ]
  },
  {
    title: "íŒ€ì—ì„œ ì¤‘ìš”í•œ ì—­í• ì„ ë§¡ê²Œ ë˜ì—ˆì„ ë•Œ",
    text: "ì±…ì„ì´ í° ì¼ì„ ë§¡ê²Œ ëœë‹¤ë©´, ë‚˜ëŠ”â€¦",
    axis: "ë¬¸ì œí•´ê²°",
    options: [
      { answer: "ë„ì›€ì„ êµ¬í•˜ë©° í˜‘ì¡°ë¥¼ ì–»ëŠ”ë‹¤", style: "ìˆœì‘" },
      { answer: "ë°˜ë“œì‹œ ì„±ì·¨í•˜ê² ë‹¤ê³  ë‹¤ì§í•œë‹¤", style: "íˆ¬ìŸ" },
      { answer: "ëª¨ë“  ê³¼ì •ì„ ì² ì €íˆ ì¤€ë¹„í•œë‹¤", style: "ì™„ë²½ì£¼ì˜" },
      { answer: "ì• ì´ˆì— ë§¡ì§€ ì•Šìœ¼ë ¤ í•œë‹¤", style: "íšŒí”¼" }
    ]
  },
  {
    title: "ì¹œë°€í•˜ê²Œ ë‹¤ê°€ì˜¤ëŠ” ì‚¬ëŒ",
    text: "ëˆ„êµ°ê°€ ê°‘ìê¸° ì¹œê·¼í•˜ê²Œ ë‹¤ê°€ì˜¬ ë•Œ, ë‚˜ëŠ”â€¦",
    axis: "ê´€ê³„",
    options: [
      { answer: "ë°˜ê°‘ê²Œ ë°›ì•„ë“¤ì¸ë‹¤", style: "ìˆœì‘" },
      { answer: "ì˜ë„ë¥¼ ì˜ì‹¬í•˜ë©° ê²½ê³„í•œë‹¤", style: "íˆ¬ìŸ" },
      { answer: "ê±°ë¦¬ ì¡°ì ˆì´ ì–´ë ¤ì›Œ ë¶ˆì•ˆí•˜ë‹¤", style: "ì™„ë²½ì£¼ì˜" },
      { answer: "ìƒí™© ìì²´ê°€ ë¶€ë‹´ìŠ¤ëŸ¬ì›Œ í”¼í•œë‹¤", style: "íšŒí”¼" }
    ]
  },
  {
    title: "ê°ˆë“±ì´ ìƒê²¼ì„ ë•Œ",
    text: "ëª¨ì„ì—ì„œ ê°ˆë“± ìƒí™©ì´ ìƒê¸°ë©´, ë‚˜ëŠ”â€¦",
    axis: "ë¬¸ì œí•´ê²°",
    options: [
      { answer: "ë¶„ìœ„ê¸°ë¥¼ ë§ì¶”ë©° ê°ˆë“±ì„ ë®ëŠ”ë‹¤", style: "ìˆœì‘" },
      { answer: "ì •ë©´ìœ¼ë¡œ ë§ì„œë©° ëª©ì†Œë¦¬ë¥¼ ë†’ì¸ë‹¤", style: "íˆ¬ìŸ" },
      { answer: "ëª¨ë‘ê°€ ë‚©ë“í•  íƒ€í˜‘ì ì„ ì°¾ìœ¼ë ¤ í•œë‹¤", style: "ì™„ë²½ì£¼ì˜" },
      { answer: "ì•„ì˜ˆ ê´€ì—¬í•˜ì§€ ì•Šê³  ë¬¼ëŸ¬ë‚œë‹¤", style: "íšŒí”¼" }
    ]
  },
  {
    title: "ìƒˆë¡œìš´ ì •ë³´ë¥¼ ì–»ì–´ì•¼ í•  ë•Œ",
    text: "í•„ìš”í•œ ì •ë³´ë¥¼ ì•Œì•„ë‚´ì•¼ í•˜ëŠ” ìˆœê°„, ë‚˜ëŠ”â€¦",
    axis: "ë¬¸ì œí•´ê²°",
    options: [
      { answer: "ë‹¤ë¥¸ ì‚¬ëŒì—ê²Œ ë„ì›€ì„ ì²­í•œë‹¤", style: "ìˆœì‘" },
      { answer: "ìŠ¤ìŠ¤ë¡œ ë¨¼ì € íƒìƒ‰í•œë‹¤", style: "íˆ¬ìŸ" },
      { answer: "ìë£Œë¥¼ ê¹Šê²Œ ë¶„ì„í•˜ëŠë¼ ëŠ¦ì–´ì§„ë‹¤", style: "ì™„ë²½ì£¼ì˜" },
      { answer: "ëª°ë¼ë„ ëœë‹¤ê³  ë„˜ê¸´ë‹¤", style: "íšŒí”¼" }
    ]
  },
  {
    title: "ë„ì›€ì„ ë°›ì„ ë•Œ",
    text: "ëˆ„êµ°ê°€ ë‚˜ë¥¼ ë•ê² ë‹¤ê³  í•  ë•Œ, ë‚˜ëŠ”â€¦",
    axis: "ìê¸°ì¤‘ì‹¬",
    options: [
      { answer: "ì• ì •ì„ ëŠë¼ë©° ê³ ë§ˆì›Œí•œë‹¤", style: "ìˆœì‘" },
      { answer: "ê±°ë˜ì˜ ê¸°íšŒë¼ ìƒê°í•œë‹¤", style: "íˆ¬ìŸ" },
      { answer: "ë‚´ê°€ ë¶€ì¡±í–ˆêµ¬ë‚˜ ìì±…í•œë‹¤", style: "ì™„ë²½ì£¼ì˜" },
      { answer: "ê´œì°®ë‹¤ë©° ê±°ë¦¬ë¥¼ ë‘”ë‹¤", style: "íšŒí”¼" }
    ]
  },
  {
    title: "ëˆ„êµ°ê°€ ë‚˜ì—ê²Œ ì˜ì§€í•  ë•Œ",
    text: "ì£¼ë³€ ì‚¬ëŒì´ ë‚˜ì—ê²Œ ì˜ì§€í•˜ë ¤ í•œë‹¤ë©´, ë‚˜ëŠ”â€¦",
    axis: "ìê¸°ì¤‘ì‹¬",
    options: [
      { answer: "ê¸°êº¼ì´ ë°›ì•„ë“¤ì¸ë‹¤", style: "ìˆœì‘" },
      { answer: "ì–¸ì  ê°€ ë‚˜ë„ ë¶€íƒí•  ìˆ˜ ìˆë‹¤ê³  ìƒê°í•œë‹¤", style: "íˆ¬ìŸ" },
      { answer: "ê°ì •ì  ì˜ì¡´ì´ ë²„ê²ë‹¤", style: "ì™„ë²½ì£¼ì˜" },
      { answer: "ê´€ê³„ê°€ ë¬´ê±°ì›Œì§ˆê¹Œ ë‘ë ¤ì›Œ í”¼í•œë‹¤", style: "íšŒí”¼" }
    ]
  },
  {
    title: "ë¹„ë‚œ ìƒí™©",
    text: "ëˆ„êµ°ê°€ ë‚˜ë¥¼ ê³µê°œì ìœ¼ë¡œ ë¹„ë‚œí•  ë•Œ, ë‚˜ëŠ”â€¦",
    axis: "ìê¸°ì¤‘ì‹¬",
    options: [
      { answer: "ë¯¸ì•ˆí•˜ë‹¤ë©° ì‚¬ê³¼í•œë‹¤", style: "ìˆœì‘" },
      { answer: "ë°˜ë°•í•˜ë©° ë§ì„ ë‹¤", style: "íˆ¬ìŸ" },
      { answer: "ë‚´ ë¶€ì¡±í•¨ì„ ë– ì˜¬ë¦¬ë©° ì¹¨ë¬µí•œë‹¤", style: "ì™„ë²½ì£¼ì˜" },
      { answer: "ì• ì¨ ë“£ì§€ ì•Šìœ¼ë ¤ í•œë‹¤", style: "íšŒí”¼" }
    ]
  },
  {
    title: "ì¹­ì°¬ ìƒí™©",
    text: "ë‚´ê°€ í•œ ì¼ì„ ì¹­ì°¬ë°›ì„ ë•Œ, ë‚˜ëŠ”â€¦",
    axis: "ì •ì„œí‘œí˜„",
    options: [
      { answer: "ì‚¬ë‘ë°›ëŠ”ë‹¤ê³  ëŠë‚€ë‹¤", style: "ìˆœì‘" },
      { answer: "ë‚´ íŒë‹¨ì´ ì˜³ì•˜ìŒì„ í™•ì¸í•œë‹¤", style: "íˆ¬ìŸ" },
      { answer: "ì•„ì§ ë¶€ì¡±í•˜ë‹¤ê³  ì±„ê·¼í•œë‹¤", style: "ì™„ë²½ì£¼ì˜" },
      { answer: "ë¶€ë‹´ìŠ¤ëŸ¬ì›Œì„œ ê·¸ë ‡ì§€ ì•Šë‹¤ê³  ë¶€ì •í•œë‹¤", style: "íšŒí”¼" }
    ]
  },
  {
    title: "ë¯¸ë˜ì˜ ì„ íƒ ì•ì—ì„œ",
    text: "ì•ìœ¼ë¡œ ì–´ë–¤ ê¸¸ì„ ê±¸ì„ì§€ ê²°ì •í•´ì•¼ í•  ë•Œ, ë‚˜ëŠ”â€¦",
    axis: "ë¬¸ì œí•´ê²°",
    options: [
      { answer: "ì£¼ë³€ì˜ ê¸°ëŒ€ì™€ ì‹œì„ ì„ ë¨¼ì € ìƒê°í•œë‹¤", style: "ìˆœì‘" },
      { answer: "ë‚´ í˜ìœ¼ë¡œ ê¸¸ì„ ì—´ê² ë‹¤ê³  ë‹¤ì§í•œë‹¤", style: "íˆ¬ìŸ" },
      { answer: "ëª¨ë“  ì‹œë‚˜ë¦¬ì˜¤ë¥¼ ê²€í† í•˜ë©° ì™„ë²½í•œ ë‹µì„ ì°¾ìœ¼ë ¤ í•œë‹¤", style: "ì™„ë²½ì£¼ì˜" },
      { answer: "ë‹¹ì¥ ë‹¤ë¥¸ ë‹¨ê¸° ëª©í‘œë¥¼ ì„¸ì›Œ, ì§ë©´í•´ì•¼ í•  ë¬¸ì œë¥¼ ì™¸ë©´í•œë‹¤", style: "íšŒí”¼" }
    ]
  }
];

// =========================
// 2. ê²°ê³¼ ê³„ì‚°
// =========================
function calculateResults(answers) {
  let scores = { ìˆœì‘: 0, íˆ¬ìŸ: 0, ì™„ë²½ì£¼ì˜: 0, íšŒí”¼: 0 };
  answers.forEach(a => scores[a.style]++);
  return scores;
}

function classify(scores) {
  const max = Math.max(...Object.values(scores));
  const dominant = Object.keys(scores).filter(k => scores[k] === max);

  if (dominant.length === 1) return dominant[0];
  if (dominant.length === 4) return "ê· í˜•";
  if (dominant.length > 1) return "ê· í˜•";
  return dominant[0];
}

// =========================
// 3. ì¢…í•© í•´ì„¤
// =========================
const explanations = {
  "ìˆœì‘": "ë‹¹ì‹ ì€ ë‹¤ë¥¸ ì‚¬ëŒì˜ ê¸°ëŒ€ì™€ ê¸°ë¶„ì„ ì‚´í”¼ëŠ” ë° ìµìˆ™í•©ë‹ˆë‹¤. ê·¸ë˜ì„œ ê´€ê³„ ì†ì—ì„œ í¸ì•ˆí•¨ê³¼ ì‹ ë¢°ë¥¼ ì£¼ì§€ë§Œ, ì •ì‘ ë³¸ì¸ì˜ ìš•êµ¬ëŠ” ì‰½ê²Œ ë’¤ë¡œ ë°€ë¦½ë‹ˆë‹¤. ì¸ì •ë°›ì§€ ëª»í•˜ë©´ ì„œìš´í•¨ê³¼ ê³µí—ˆê°ì´ í¬ê²Œ ë‹¤ê°€ì˜¬ ìˆ˜ ìˆìŠµë‹ˆë‹¤. í•˜ì§€ë§Œ ì´ê±´ ë‹¹ì‹ ì´ ì•½í•´ì„œê°€ ì•„ë‹ˆë¼, ì‚¬ë‘ë°›ê³  ì‹¶ê³  ì¢‹ì€ ê´€ê³„ë¥¼ ì§€í‚¤ê³  ì‹¶ì€ ë§ˆìŒì´ í¬ê¸° ë•Œë¬¸ì…ë‹ˆë‹¤. ì´ì œëŠ” â€˜ë‚´ê°€ ì›í•˜ëŠ” ê²ƒâ€™ì„ ì¡°ê¸ˆì”© ë“œëŸ¬ë‚´ëŠ” ì—°ìŠµì´ í•„ìš”í•©ë‹ˆë‹¤. ê·¸ ê³¼ì •ì´ ìŒ“ì´ë©´, ê´€ê³„ëŠ” ë” ê±´ê°•í•´ì§€ê³  ë‹¹ì‹  ìì‹ ë„ ë” ë‹¨ë‹¨í•´ì§ˆ ìˆ˜ ìˆìŠµë‹ˆë‹¤.",

  "íˆ¬ìŸ": "ë‹¹ì‹ ì€ ìì‹ ì˜ ì˜ê²¬ì„ ë¶„ëª…íˆ ë‚´ì„¸ìš°ë©°, ê·¸ê²ƒì´ ë¶€ì •ë˜ê±°ë‚˜ ì†í•´ë¥¼ ë³´ê²Œ ë  ë•Œ ì‰½ê²Œ ì°¸ì§€ ëª»í•˜ëŠ” ì„±í–¥ì„ ë³´ì…ë‹ˆë‹¤. ì´ëŸ° íƒœë„ëŠ” ë¬¸ì œ í•´ê²°ì˜ ì¤‘ì‹¬ì— ì„œê²Œ ë§Œë“¤ê³  ê°•í•œ ì¶”ì§„ë ¥ìœ¼ë¡œ ì´ì–´ì§€ê¸°ë„ í•˜ì§€ë§Œ, ìƒëŒ€ì— ëŒ€í•œ ë°°ë ¤ë‚˜ ì´í•´ê°€ ë¶€ì¡±í•´ ë¶ˆí•„ìš”í•œ ê°ˆë“±ì„ í‚¤ìš¸ ë•Œê°€ ìˆìŠµë‹ˆë‹¤. ë‚´ ëœ»ì„ ëê¹Œì§€ ê´€ì² í•˜ë ¤ëŠ” ì˜ì§€ëŠ” ë¶„ëª… ì¥ì ì´ì§€ë§Œ, ì„¸ìƒì˜ ëª¨ë“  ê´€ê³„ê°€ ì‹¸ì›Œì„œ ì´ê²¨ì•¼ í•˜ëŠ” ì‹¸ì›€í„°ëŠ” ì•„ë‹™ë‹ˆë‹¤. ë•Œë¡œëŠ” ìƒëŒ€ë¥¼ ì´í•´í•˜ëŠ” ê³¼ì •ì—ì„œ ë” í° ì„¤ë“ë ¥ê³¼ ì‹ ë¢°ë¥¼ ì–»ì„ ìˆ˜ ìˆê³ , ê·¸ê²ƒì´ ì˜¤íˆë ¤ ë‹¹ì‹ ì˜ í˜ì„ ë” í¬ê²Œ ë§Œë“¤ì–´ ì¤„ ìˆ˜ ìˆìŠµë‹ˆë‹¤.",

  "ì™„ë²½ì£¼ì˜": "ë‹¹ì‹ ì€ ì–´ë–¤ ì¼ì„ ë§¡ì•„ë„ í—ˆìˆ í•˜ê²Œ ë„˜ì–´ê°€ì§€ ì•Šê³  ê¼¼ê¼¼íˆ ì¤€ë¹„í•˜ëŠ” í¸ì…ë‹ˆë‹¤. ì´ íƒœë„ëŠ” ì‹ ë¢°ì™€ ì¡´ì¤‘ì„ ì–»ëŠ” ê°•ì ì´ì§€ë§Œ, ë•Œë¡œëŠ” â€˜ì™„ë²½í•˜ì§€ ì•Šìœ¼ë©´ ì‹œì‘í•˜ì§€ ëª»í•˜ëŠ”â€™ ë°œëª©ì¡ê¸°ê°€ ë˜ê¸°ë„ í•©ë‹ˆë‹¤. ìê¸° ë¶€ì¡±í•¨ì„ ìê¾¸ ê³±ì”¹ë‹¤ ë³´ë©´ ì‰½ê²Œ ì§€ì¹˜ê³  ìì‹ ì„ ëª°ì•„ë¶™ì´ê²Œ ë˜ì§€ìš”. í•˜ì§€ë§Œ ì™„ë²½ì„ í–¥í•œ ì§‘ì°©ì€ ë‹¨ìˆœí•œ ê°•ë°•ì´ ì•„ë‹ˆë¼ ë” ë‚˜ì€ ì‚¶ê³¼ ì„±ì·¨ë¥¼ ë°”ë¼ëŠ” ë§ˆìŒì˜ í‘œí˜„ì…ë‹ˆë‹¤. ì‘ì€ ë¶ˆì™„ì „í•¨ì„ ì¸ì •í•˜ê³  ì§€ê¸ˆ ì´ ìë¦¬ì—ì„œ ì‹œì‘í•´ ë³´ì„¸ìš”. ê·¸ ìˆœê°„ë¶€í„° ë‹¹ì‹ ì˜ ì„¬ì„¸í•¨ì€ ê°€ì¥ í° ë¬´ê¸°ë¡œ ë°”ë€” ìˆ˜ ìˆìŠµë‹ˆë‹¤.",

  "íšŒí”¼": "ë‹¹ì‹ ì€ ê°ˆë“±ì´ë‚˜ ì±…ì„, ê¹Šì€ ê´€ê³„ì—ì„œ ë¶€ë‹´ì„ í¬ê²Œ ëŠë‚„ ë•Œ ê±°ë¦¬ë¥¼ ë‘ë©° ìŠ¤ìŠ¤ë¡œë¥¼ ì§€ì¼œë‚´ë ¤ í•©ë‹ˆë‹¤. ë¬¸ì œë¥¼ ì •ë©´ìœ¼ë¡œ ë‹¤ë£¨ê¸°ë³´ë‹¤ ë‹¤ë¥¸ ë‹¨ê¸° ëª©í‘œë¡œ ì‹œì„ ì„ ëŒë ¤ ëª¨ë©´í•˜ëŠ” ê²½ìš°ë„ ìˆìŠµë‹ˆë‹¤. ì´ ë•ë¶„ì— í° ìƒì²˜ë¥¼ í”¼í•  ìˆ˜ ìˆì§€ë§Œ, ë™ì‹œì— ì¤‘ìš”í•œ ìˆœê°„ì„ ë†“ì¹˜ê¸°ë„ í•˜ì§€ìš”. ê·¸ë ‡ë‹¤ê³  í•´ì„œ ë‹¹ì‹ ì´ ì•½í•œ ê±´ ì•„ë‹™ë‹ˆë‹¤. ì˜¤íˆë ¤ ìì‹ ì„ ì§€í‚¤ê³  ì‹¶ì€ ë³¸ëŠ¥ì´ ê°•í•˜ë‹¤ëŠ” ëœ»ì…ë‹ˆë‹¤. ë„ë§ì¹˜ê³  ì‹¶ì€ ìˆœê°„ì—ë„ ì•„ì£¼ ì‘ì€ ë¶€ë¶„ë¶€í„° ë§ˆì£¼í•´ ë³´ì„¸ìš”. ë‘ë ¤ì›€ì€ ì¤„ê³ , íšŒí”¼ëŠ” ìœ ì—°í•¨ìœ¼ë¡œ ë°”ë€Œì–´ ë‹¹ì‹ ì„ ì§€ì¼œì¤„ ê²ƒì…ë‹ˆë‹¤.",

  "ê· í˜•": "ë‹¹ì‹ ì€ ìƒí™©ì— ë”°ë¼ ìˆœì‘Â·íˆ¬ìŸÂ·ì™„ë²½ì£¼ì˜Â·íšŒí”¼ ì‚¬ì´ì—ì„œ ìœ ì—°í•˜ê²Œ íƒœë„ë¥¼ ë°”ê¿€ ìˆ˜ ìˆìŠµë‹ˆë‹¤. ê·¸ë˜ì„œ ì‚¬ëŒë“¤ì˜ ì…ì¥ì„ ì˜ ì´í•´í•˜ê³  ë‹¤ì–‘í•œ ìƒí™©ì— ì ì‘í•˜ëŠ” í˜ì„ ì§€ë‹ˆê³  ìˆìŠµë‹ˆë‹¤. í•˜ì§€ë§Œ ë•Œë¡œëŠ” â€˜ì •ì²´ì„±ì´ ëšœë ·í•˜ì§€ ì•Šë‹¤â€™ëŠ” ë¶ˆì•ˆì´ë‚˜ í‰ê°€ë¥¼ ë°›ì„ ìˆ˜ë„ ìˆìŠµë‹ˆë‹¤. ì´ê±´ í”ë“¤ë¦¼ì´ ì•„ë‹ˆë¼ ì˜¤íˆë ¤ ì„±ìˆ™í•œ í˜ì…ë‹ˆë‹¤. í•„ìš”ì— ë”°ë¼ íƒœë„ë¥¼ ì¡°ìœ¨í•  ìˆ˜ ìˆëŠ” ëŠ¥ë ¥ì€ ëˆ„êµ¬ë‚˜ ê°€ì§€ì§€ ëª»í•œ ì¬ëŠ¥ì´ë‹ˆê¹Œìš”. ì—¬ê¸°ì— í•œ ê°€ì§€ ë°©í–¥ì„ ë°€ì–´ë¶™ì´ëŠ” ê²°ë‹¨ë ¥ì´ ë”í•´ì§„ë‹¤ë©´, ë‹¹ì‹ ì€ í›¨ì”¬ ììœ ë¡­ê³  ë‹¨ë‹¨í•œ ê¸¸ì„ ê±¸ì–´ê°ˆ ìˆ˜ ìˆìŠµë‹ˆë‹¤."
};

// =========================
// 4. ê°œì„  ë°©í–¥
// =========================
const improvements = {
  "ìˆœì‘": "ì‘ì€ ë¶€íƒì´ë¼ë„ ì •ì¤‘íˆ ê±°ì ˆí•˜ëŠ” ì—°ìŠµì„ í•´ë³´ì„¸ìš”. ì˜ì™¸ë¡œ ìƒëŒ€ë°©ì€ ì´í•´í•´ì£¼ê³ , ì˜¤íˆë ¤ ë‹¹ì‹ ì˜ ì†”ì§í•¨ì„ ì¡´ì¤‘í•  ê²ƒì…ë‹ˆë‹¤. ê±°ì ˆì˜ ê²½í—˜ì´ ìŒ“ì¼ìˆ˜ë¡ ê´€ê³„ëŠ” ë” ê±´ê°•í•´ì§€ê³ , ë‹¹ì‹ ë„ ìì‹ ì„ ì§€ì¼œë‚´ëŠ” ë²•ì„ ë°°ì›Œê°‘ë‹ˆë‹¤.",
  "íˆ¬ìŸ": "ì£¼ì¥ì„ í¼ì¹˜ê¸° ì „ì— ë¨¼ì € ìƒëŒ€ì˜ ì´ì•¼ê¸°ë¥¼ ë“¤ì–´ë³´ì„¸ìš”. ì˜ì™¸ë¡œ ê·¸ ì†ì—ì„œ ê³µí†µì ì„ ë°œê²¬í•  ìˆ˜ ìˆê³ , ë‹¹ì‹ ì˜ í˜ì€ í˜‘ë ¥ìœ¼ë¡œ ì´ì–´ì§ˆ ìˆ˜ ìˆìŠµë‹ˆë‹¤. ì‹¸ìš°ì§€ ì•Šê³ ë„ ë‹¹ì‹ ì˜ ë¦¬ë”ì‹­ì„ ë¹›ë‚¼ ìˆœê°„ì€ ë°˜ë“œì‹œ ì°¾ì•„ì˜µë‹ˆë‹¤.",
  "ì™„ë²½ì£¼ì˜": "ë¶ˆì™„ì „í•œ ìƒíƒœë¡œë„ ì‹œì‘í•´ ë³´ì„¸ìš”. ì‘ì€ ì‹¤í–‰ì´ ìŒ“ì´ë©´ ì–´ëŠìƒˆ ì„±ì·¨ë¡œ ì´ì–´ì§€ê³ , ì™„ë²½ì— ëŒ€í•œ ì§‘ì°©ì€ ê±´ê°•í•œ ìì‹ ê°ìœ¼ë¡œ ë°”ë€” ìˆ˜ ìˆìŠµë‹ˆë‹¤. ì‹¤í–‰ ì†ì—ì„œ ì–»ëŠ” ê²½í—˜ì´ì•¼ë§ë¡œ ë‹¹ì‹ ì´ ì°¾ë˜ ì§„ì§œ ì™„ë²½ì— ê°€ê¹Œìš´ ë‹µì¼ì§€ë„ ëª¨ë¦…ë‹ˆë‹¤.",
  "íšŒí”¼": "ë„ë§ì¹˜ê³  ì‹¶ì„ ë•Œ ì•„ì£¼ ì‘ì€ í–‰ë™ì´ë¼ë„ í•´ë³´ì„¸ìš”. ë‹¨ í•œ ê±¸ìŒì„ ë‚´ë”›ëŠ” ê²ƒë§Œìœ¼ë¡œë„ ë¬¸ì œëŠ” ìƒê°ë³´ë‹¤ ëœ ë‘ë µë‹¤ëŠ” ê±¸ ì•Œê²Œ ë©ë‹ˆë‹¤. ëª¨ë©´ì´ ì•„ë‹ˆë¼ ì§ë©´ì„ ê²½í—˜í•  ë•Œ, ë‹¹ì‹ ì˜ íšŒí”¼ëŠ” ì§€í˜œë¡œìš´ ì„ íƒì˜ ìœ ì—°í•¨ìœ¼ë¡œ ë³€í•  ìˆ˜ ìˆìŠµë‹ˆë‹¤.",
  "ê· í˜•": "ë‹¹ì‹ ì˜ ìœ ì—°í•¨ì€ ì´ë¯¸ í° ì¥ì ì…ë‹ˆë‹¤. í•˜ì§€ë§Œ ë•Œë¡œëŠ” í•œ ê°€ì§€ íƒœë„ë¥¼ ëê¹Œì§€ ë°€ì–´ë¶™ì´ëŠ” ì—°ìŠµë„ í•„ìš”í•©ë‹ˆë‹¤. ê·¸ ê· í˜•ê°ê°ì— ê²°ë‹¨ë ¥ì´ ë”í•´ì§„ë‹¤ë©´, ë‹¹ì‹ ì€ ë” ë‹¨ë‹¨í•˜ê³  ììœ ë¡œìš´ ì‚¶ì„ ë§Œë“¤ì–´ê°ˆ ìˆ˜ ìˆìŠµë‹ˆë‹¤."
};

// =========================
// 5. ì„¸ë¶€ í•´ì„¤ (ìƒì¶© vs ì¼ê´€ì„± + ê°œì„ ë°©í–¥)
// =========================
function conflictInterpretation(answers, dominant) {
  let output = ""; // "ì„¸ë¶€ í•´ì„¤" íƒ€ì´í‹€ ì œê±°

  const rep = answers.find(a => a.style === dominant);
  const others = answers.filter(a => a.style !== dominant);
  const conflict = others.length > 0 ? others[Math.floor(Math.random() * others.length)] : null;

  if (rep && conflict && dominant !== "ê· í˜•") {
    // ìƒì¶© í•´ì„
    output += `<p>
      â€œ${rep.text}â€ì—ì„œ â€˜${rep.answer}â€™ë¼ê³  ë‹µí•˜ì…¨ìŠµë‹ˆë‹¤. 
      í•˜ì§€ë§Œ â€œ${conflict.text}â€ì—ì„œëŠ” â€˜${conflict.answer}â€™ë¼ê³  í•˜ì…¨ë„¤ìš”.<br><br>
      ğŸ‘‰ <b>${dominant}</b> ì„±í–¥ì´ ê°•í•˜ì§€ë§Œ ë™ì‹œì— 
      <b>${conflict.style}</b> ì„±í–¥ë„ ë“œëŸ¬ë‚©ë‹ˆë‹¤.<br><br>
      <b>ê°œì„  ë°©í–¥:</b> ${improvements[dominant]}
    </p>`;
  } else {
    // ì¼ê´€ì„± or ê· í˜• í•´ì„
    output += `<p>
      ì—¬ëŸ¬ ì§ˆë¬¸ì—ì„œ <b>${dominant}</b> ì„±í–¥ì´ ë“œëŸ¬ë‚©ë‹ˆë‹¤. 
      ì´ëŠ” ì¹´ë Œí˜¸ë‚˜ì´ê°€ ë§í•œ ì‹ ê²½ì¦ì  ê³ ì°©ì˜ ì „í˜•ì  íŒ¨í„´ì´ê±°ë‚˜, ë‹¤ì–‘í•œ íƒœë„ë¥¼ ì¡°ìœ¨í•˜ëŠ” ê· í˜• ì„±í–¥ì¼ ìˆ˜ ìˆìŠµë‹ˆë‹¤.<br><br>
      ğŸ‘‰ ${dominant}ì˜ ì¥ì ì€ ë¶„ëª…í•˜ì§€ë§Œ, ì‹¬ë¦¬ì  ìœ ì—°ì„±ì„ ë” ê¸°ë¥¼ í•„ìš”ê°€ ìˆìŠµë‹ˆë‹¤.<br><br>
      <b>ê°œì„  ë°©í–¥:</b> ${improvements[dominant]}
    </p>`;
  }

  return output;
}


// =========================
// 6. ì œì¶œ
// =========================
function submitTest(answers) {
  const scores = calculateResults(answers);
  const dominant = classify(scores);

  let output = "<h2>ê²°ê³¼</h2>";
  output += `<h3>ì¢…í•© í•´ì„¤</h3><p>${explanations[dominant]}</p>`;
  output += conflictInterpretation(answers, dominant);
  output += `
    <div class="button-group">
      <button id="restartBtn">ë‹¤ì‹œ í•˜ê¸°</button>
    </div>
  `;
  document.getElementById("result").innerHTML = output;
}

// =========================
// 7. ìˆœì°¨ ì§„í–‰ ë¡œì§ & ì´ë²¤íŠ¸ ë¦¬ìŠ¤ë„ˆ
// =========================
let currentQuestion = 0;
let userAnswers = [];

function startTest() {
  document.getElementById("intro").style.display = "none";
  document.getElementById("testForm").style.display = "block";
  currentQuestion = 0;
  userAnswers = [];
  showQuestion();
}

function showQuestion() {
  const q = questions[currentQuestion];
  let html = `<div class="question">`;

  if (q.title) {
    html += `<h3 style="text-align:center;">${q.title}</h3>`;
  }
  html += `<p><b>${q.text}</b></p>`;

  q.options.forEach((opt, i) => {
    html += `<div class="option-card" onclick="selectOption(${i})">${opt.answer}</div>`;
  });

  html += `<p id="progress">(${currentQuestion+1}/${questions.length})</p>`;
  html += `</div>`;

  document.getElementById("question-container").innerHTML = html;
}

function selectOption(i) {
  const options = document.querySelectorAll('.option-card');
  options.forEach(el => el.style.background = "");
  options[i].style.background = "#d0ebff";

  userAnswers[currentQuestion] = {
    axis: questions[currentQuestion].axis,
    style: questions[currentQuestion].options[i].style,
    answer: questions[currentQuestion].options[i].answer,
    text: questions[currentQuestion].text
  };
}

function nextQuestion() {
  if (!userAnswers[currentQuestion]) {
    alert("ë‹µë³€ì„ ì„ íƒí•´ì£¼ì„¸ìš”.");
    return;
  }
  currentQuestion++;
  if (currentQuestion < questions.length) {
    showQuestion();
  } else {
    document.getElementById("testForm").style.display = "none";
    submitTest(userAnswers);
  }
}

function restartTest() {
  document.getElementById("result").innerHTML = "";
  document.getElementById("intro").style.display = "block";
  document.getElementById("testForm").style.display = "none";
}

document.addEventListener("DOMContentLoaded", () => {
  const startBtn = document.getElementById("startBtn");
  const nextBtn = document.getElementById("nextBtn");

  if (startBtn) startBtn.addEventListener("click", startTest);
  if (nextBtn) nextBtn.addEventListener("click", nextQuestion);

  document.addEventListener("click", (e) => {
    if (e.target && e.target.id === "restartBtn") restartTest();
  });
});
